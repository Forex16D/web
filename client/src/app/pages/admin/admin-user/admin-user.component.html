<div class="text-headline2">Users</div>
<p-toolbar styleClass="mb-6">
  <ng-template #start>
    <p-button label="New" icon="pi pi-plus" class="mr-2" />
    <p-button severity="danger" label="Delete" icon="pi pi-trash" outlined
      [disabled]="!selectedUsers || !selectedUsers.length" />
  </ng-template>

  <ng-template #end>
    <p-fileUpload mode="basic" accept="image/*" [maxFileSize]="1000000" label="Import" chooseLabel="Import" auto
      customUpload class="mr-2 inline-block" [chooseButtonProps]="{ severity: 'secondary' }" />
    <p-button label="Export" icon="pi pi-upload" severity="secondary" />
  </ng-template>
</p-toolbar>
<p-table 
  [value]="users()" 
  [(selection)]="selectedUsers" 
  [tableStyle]="{ 'min-width': '50rem' }"
  [selectionMode]="'multiple'" 
  [rows]="limit()" 
  [rowsPerPageOptions]="[1, 10, 25, 50]" 
  [paginator]="true"
  [first]="(page() - 1) * limit()" 
  (onPage)="onPageChange($event)">
  <ng-template #header>
    <tr>
      <th style="width: 1rem">
        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
      </th>
      <th>Id</th>
      <th>Name</th>
      <th>Role</th>
      <th style="width: 8rem">
    </tr>
  </ng-template>
  <ng-template #body let-user let-index="rowIndex">
    <tr [pSelectableRow]="user">
      <td>
        <p-tableCheckbox [value]="user"></p-tableCheckbox>
      </td>
      <td>{{ user.user_id }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.role }}</td>
      <td>
        <p-button icon="pi pi-pencil" class="mr-2" [rounded]="true" [outlined]="true" />
        <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true" />
      </td>
    </tr>
  </ng-template>
</p-table>

<p>Selected Users: {{ selectedUsers() | json }}</p>